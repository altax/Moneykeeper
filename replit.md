# Копилка - Приложение для накоплений

## Обзор
Мобильное приложение для Android, разработанное на React Native (Expo), которое помогает пользователю копить деньги на заданную цель.

## Текущее состояние
- Готова версия MVP с полным функционалом
- Профессиональный тёмный дизайн в стиле банковского приложения
- Локальное хранение данных через AsyncStorage
- Добавлен функционал отслеживания рабочих смен

## Основной функционал
- Создание и редактирование финансовых целей
- Визуальный прогресс накоплений (круговая диаграмма)
- Добавление накоплений с валидацией суммы (не превышает цель)
- Перенос излишков на другие цели при превышении
- Динамическое изменение цвета прогресс-бара по мере приближения к цели
- Отслеживание рабочих смен (дата, тип операции, планируемый заработок)
- История накоплений с группировкой по целям
- Настройки приложения (имя пользователя, уведомления)

## Технологии
- React Native с Expo SDK 54
- React Navigation 7 для навигации
- AsyncStorage для локального хранения
- react-native-svg для визуализации прогресса
- react-native-reanimated для анимаций
- MaterialCommunityIcons для иконок

## Структура проекта
```
client/
├── components/        # UI компоненты
│   ├── CircularProgress.tsx  # Круговой прогресс
│   ├── ProgressBar.tsx       # Линейный прогресс (динамические цвета)
│   ├── GoalCard.tsx          # Карточка цели
│   ├── ContributionItem.tsx  # Элемент накопления
│   └── EmptyState.tsx        # Пустое состояние
├── screens/           # Экраны приложения
│   ├── GoalsScreen.tsx        # Список целей + смены
│   ├── GoalDetailScreen.tsx   # Детали цели
│   ├── SafeScreen.tsx         # Сейф для излишков
│   ├── HistoryScreen.tsx      # История накоплений
│   ├── SettingsScreen.tsx     # Настройки
│   └── AddGoalModal.tsx       # Добавление цели
├── navigation/        # Навигация
├── lib/              # Утилиты и хранилище
│   ├── storage.ts    # AsyncStorage операции
│   └── types.ts      # TypeScript типы
└── constants/        # Тема и константы
    └── theme.ts      # Цветовая палитра и стили
```

## Дизайн
- Профессиональная тёмная тема (#0A0A0F корневой фон, #12121A основной фон)
- Цветовая палитра:
  - Primary: #60A5FA (синий)
  - Accent: #818CF8 (индиго)
  - Success: #34D399 (зелёный)
  - Warning: #FBBF24 (жёлтый)
  - Error: #F87171 (красный)
- Карточки с тонкими границами и элегантными тенями
- Плавные анимации переходов
- Адаптивный дизайн для разных размеров экранов

## Запуск
```bash
npm run all:dev
```

## Последние изменения
- 2025-12-05: MAJOR UX REDESIGN - Упрощённый интерфейс смен:
  - Убраны поля планируемого заработка и взноса из формы создания смены
  - Запланированные смены теперь показывают только: тип операции, день/ночь, время до начала
  - Активные смены показывают прогресс-бар с оставшимся временем и кнопку "Завершить"
  - Убран верхний баннер "завершите смену"
  - Добавлена секция завершённых смен с вертикальными столбцами и суммой заработка
  - При завершении смены: ввод заработка, выбор цели, сумма взноса (остаток в сейф)
  - Автопропуск смен через 12 часов (без нулевого заработка)
- 2025-12-05: Компактный UI с единой тёплой тёмной цветовой схемой
- 2025-12-05: Добавлено отображение времени до начала запланированных смен
- 2025-12-05: Исправлена совместимость с Expo Go (отключены экспериментальные функции)
- 2025-12-05: Мягкая гармоничная цветовая палитра для тёмной темы
- 2025-12-05: Профессиональный редизайн UI с когерентной тёмной цветовой палитрой
- 2025-12-05: Удалена плавающая кнопка (FAB), добавлена кнопка "Новая цель" в заголовок
- 2025-12-05: Переработан раздел смен с элегантным минималистичным дизайном
- 2025-12-05: Обновлены все компоненты (GoalCard, ProgressBar, Card, Button, EmptyState)
- 2025-12-05: Улучшен экран сейфа с профессиональным оформлением
- 2025-12-05: Добавлен полноценный календарь для выбора произвольной даты рабочей смены
- 2025-12-05: Добавлена валидация суммы пополнения с переносом излишков на другие цели
- 2025-12-05: Динамическое изменение цвета прогресс-бара по проценту выполнения
- 2025-12-05: Создан MVP приложения Копилка

## Статус функционала
### Реализовано:
- Профессиональный тёмный дизайн в стиле банковского приложения
- Сейф для хранения излишков средств
- Иконки для целей (21 стандартная иконка)
- Перенос излишков на другие цели или в сейф
- Упрощённое планирование смен (без заработка и взноса при создании)
- Ручное завершение смен с вводом реального заработка
- Автопропуск истёкших смен через 12 часов (не создают записи)
- Отображение времени до начала запланированных смен
- Секция активных смен с прогресс-баром и кнопкой "Завершить"
- Секция завершённых смен с графиком и суммой заработка
- Адаптивный дизайн для разных экранов

### В планах:
- Выбор нескольких целей одновременно для распределения излишков
